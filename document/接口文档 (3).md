用户登录、活动搜索、活动筛选（全部、热门、按组织、按学院、按具体类型）、活动推荐（轮播图）、查看活动详情、活动评论、活动预约与取消预约(预约成功或取消预约后，添加到消息表中)、日历显示、消息通知、用户活动参与情况统计、用户信息管理与修改、个性化设置、管理员发布活动、管理员发布提醒、活动名单查看与导出、违约处理、活动报告生成

数据库：用户表（活动数---->每一类活动的参与数？学院改名为department，头像改为avatar，增加gender字段、邮箱字段）、活动表（加一个hasLimit段，表示限制人数；description段，表表示活动详情；requirements段，表示参与要求）、管理员——活动关联表、用户——活动参与表（活动参与表改为活动预约表，reservationId；）、消息表、评论表

关于轮播图的展示逻辑：展示热门且还有剩余名额的活动，展示最新的活动（从activity表中倒着选,即从id由大到小选）





后续改进的点：前端活动查看分页功能（如果活动数量多，一次性返回所有活动数据会导致性能问题）；筛选与搜素的功能有重叠，可做优化；轮播图的更新频率的设置？不同筛选下轮播图的不同展示；评论的筛选功能；用户预约时，有5s阅读活动要求的时间；活动预约冲突检测；消息已读未读；管理员活动评论删除

项目亮点：违约处理、消息通知与提醒 ;活动分发机制;（活动发布、预约）；诚信度检测；预约未开始则置灰



其他工作：前端参数名、数据库中数据名与接口中的参数名保持一致

### 狮山约享系统 API 接口设计

### 头像、图片等上传的统一接口

**接口路径**：`/api/auth/image`

**方法**：POST

**描述**：用户上传头像，管理员上传图像

**请求参数**：

| 参数名称 | 类型   | 描述                        | 是否必填 |
| -------- | ------ | --------------------------- | -------- |
| `image`  | `file` | 学生上传头像/管理员上传头像 | 是       |

## 1. 用户认证与信息管理

| 接口路径                  | 方法 | 描述                          |
| ------------------------- | ---- | ----------------------------- |
| `/api/auth/login`         | POST | 用户登录，验证学号/工号和密码 |
| `/api/auth/logout`        | POST | 用户登出，清除会话            |
| `/api/auth/refresh-token` | POST | 刷新用户令牌                  |
| `/api/users/profile`      | GET  | 获取用户个人资料              |
| `/api/users/profile`      | PUT  | 更新用户个人资料              |
| `/api/users/password`     | PUT  | 修改用户密码                  |

---

**接口路径**：`/api/auth/login`

**方法**：POST

**描述**：用户登录，验证学号/工号和密码

**请求参数**：

| 参数名称   | 类型     | 描述            | 是否必填 |
| ---------- | -------- | --------------- | -------- |
| `userId`   | `string` | 学号/管理员账号 | 是       |
| `password` | `string` | 用户密码        | 是       |
| `userType` | `int`    | 用户类型        | 是       |

**调用示例**：无

**返回参数**

| 参数名称     | 类型     | 描述                                                     |
| ------------ | :------- | -------------------------------------------------------- |
| `code`       | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`        | `string` | 默认为null，非必须，展示错误信息                         |
| `token`      | `string` | 用户登录成功后返回的令牌                                 |
| `userId`     | `string` | 用户ID                                                   |
| `userName`   | `string` | 用户名                                                   |
| `avatar`     | `file`   | 头像                                                     |
| `department` | `string` | 学院                                                     |
| releaseTime  | `string` | 解禁时间//用来判断用户能否预约，不能预约则置灰           |

---

**接口路径**：`/api/users/profile`

**方法**：GET

**描述**：获取用户（学生）个人资料

**请求参数**：无

**调用示例**

`GET /api/users/profile`
`Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...`

**返回参数**

| 参数名称        | 类型     | 描述                                                     |
| --------------- | -------- | -------------------------------------------------------- |
| `code`          | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`           | `string` | 默认为null，非必须，展示错误信息                         |
| `userId`        | `number` | 用户 ID                                                  |
| `userType`      | `string` | 角色                                                     |
| `userName`      | `string` | 用户名                                                   |
| `department`    | `string` | 学院                                                     |
| `grade`         | `string` | 年级                                                     |
| `class`         | `string` | 班级                                                     |
| `phone`         | `string` | 电话                                                     |
| `email`         | `string` | 邮箱                                                     |
| `gender `       | `string` | 性别                                                     |
| `activityCount` | `number` | 活动参与次数                                             |
| `violateCount`  | `number` | 违约次数                                                 |
| `avatar`        | `file`   | 头像                                                     |



---

**接口路径**：`/api/users/profile`

**方法**：PUT

**描述**：更改用户个人资料（电话、邮箱）

**请求参数**：

| 参数名称 | 类型     | 描述         | 是否必填 |
| -------- | -------- | ------------ | -------- |
| `email`  | `string` | 新的邮箱地址 | 否       |
| `phone`  | `string` | 新的电话号码 | 否       |
| `avatar` | `file`   | 头像         | 否       |

**返回参数**

| 参数名称 | 类型     | 描述                                                     |
| -------- | -------- | -------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息                         |

```json
{
  "code": 400,
  "msg": "邮箱格式不正确"
}
```

---

**接口路径**：`/api/users/password`

**方法**：PUT

**描述**：修改用户密码

**请求参数**：

| 参数名称      | 类型     | 描述     | 是否必填 |
| ------------- | -------- | -------- | -------- |
| `oldPassword` | `string` | 当前密码 | 是       |
| `newPassword` | `string` | 新密码   | 是       |

**返回参数**

| 参数名称 | 类型     | 描述                                                     |
| -------- | -------- | -------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息或成功信息               |

----

## 2. 活动搜索与筛选

| 接口路径                 | 方法 | 描述                                                         |
| ------------------------ | ---- | ------------------------------------------------------------ |
| `/api/activities`        | GET  | 统一描述活动查看与展示的接口                                 |
| `/api/activities/filter` | GET  | 进行活动筛选，获取热门活动/某一类别下/某一学院/某一组织的活动 |
| `/api/activities/search` | GET  | 按照关键词搜索活动                                           |

---

**接口路径**：`/api/activities/filter`

**方法**：GET

**描述**：进行活动筛选的接口，获取所有活动（按时间排序）/热门活动/某一类别下/某一学院/某一组织的活动

**请求参数**

| 参数名称    | 类型  | 描述                          | 是否必填 |
| ----------- | ----- | ----------------------------- | -------- |
| `organizer` | `int` | 组织/学院 ID                  | 否       |
| `category`  | `int` | 类别 ID                       | 否       |
| `hot`       | `int` | 是否热门（`true` 或 `false`） | 否       |

**调用示例**：

`GET /api/activities/filter?hot=true`

`GET /api/activities/filter?college=1`

`GET /api/activities/filter?organization=1&college=2&category=3&hot=true`

**返回参数**

| 参数名称              | 类型     | 描述                                                     |
| :-------------------- | :------- | :------------------------------------------------------- |
| `code`                | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`          | `number` | 活动 ID                                                  |
| `activityName`        | `string` | 活动标题                                                 |
| `activityType`        | `string` | 活动类别                                                 |
| `startTime`           | `string` | 活动开始时间                                             |
| `timeSpan`            | `string` | 活动持续时间                                             |
| `location`            | `string` | 活动地点                                                 |
| `organizer`           | `string` | 活动组织者（学院/组织）                                  |
| `image`               | `file`   | 活动图片                                                 |
| `hot`                 | `number` | 是否热门                                                 |
| `hasLimit`            | `number` | 是否有预约人数限制                                       |
| `currentParticipants` | `number` | 当前预约人数                                             |
| `maxParticipants`     | `number` | 最大限制预约人数                                         |
| `reserveStartTime`    | `string` | 活动开始预约时间，未开始则不开放                         |
| `total`               | `number` | 筛选到的活动总数（需要显示）                             |

---

**接口路径**：`/api/activities/search`

**方法**：GET

**描述**：按照关键字搜索活动，支持模糊匹配，如“数学建模比赛”、“运动会”等等

**请求参数**

| 参数名称  | 类型     | 描述       | 是否必填 |
| --------- | -------- | ---------- | -------- |
| `keyword` | `string` | 搜索关键字 | 是       |

**调用示例**

`GET /api/activities/search?keyword=数学建模`

**返回参数**（与活动筛选的逻辑一致）

| 参数名称              | 类型     | 描述                                                     |
| :-------------------- | :------- | :------------------------------------------------------- |
| `code`                | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`          | `number` | 活动 ID                                                  |
| `activityName`        | `string` | 活动标题                                                 |
| `activityType`        | `string` | 活动类别                                                 |
| `startTime`           | `string` | 活动开始时间                                             |
| `timeSpan`            | `string` | 活动持续时间                                             |
| `location`            | `string` | 活动地点                                                 |
| `organizer`           | `string` | 活动组织者（学院/组织）                                  |
| `image`               | `file`   | 活动图片                                                 |
| `hot`                 | `number` | 是否热门                                                 |
| `hasLimit`            | `number` | 是否有预约人数限制                                       |
| `currentParticipants` | `number` | 当前预约人数                                             |
| `maxParticipants`     | `number` | 最大限制预约人数                                         |
| `reserveStartTime`    | `string` | 活动开始预约时间，未开始则不开放                         |
| `total`               | `number` | 筛选到的活动总数（需要显示                               |

---

## 3. 活动推荐

| 接口路径                               | 方法 | 描述                           |
| -------------------------------------- | ---- | ------------------------------ |
| `/api/activities/recommended`          | GET  | 获取推荐活动列表（用于轮播图） |
| `/api/activities/filter?hot=true`      | GET  | 获取热门活动列表               |
| `/api/activities/{activityId}/related` | GET  | 获取与指定活动相关的活动推荐   |

---

**接口路径**：`/api/users/recommended`

**方法**：GET

**描述**：获取6个热门活动，用于轮播图展示

**请求参数**：无

**返回参数**:

| 参数名称              | 类型     | 描述                                                     |
| :-------------------- | :------- | :------------------------------------------------------- |
| `code`                | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`          | `number` | 活动 ID                                                  |
| `activityName`        | `string` | 活动标题                                                 |
| `activityType`        | `string` | 活动类别                                                 |
| `startTime`           | `string` | 活动开始时间                                             |
| `timeSpan`            | `string` | 活动持续时间                                             |
| `location`            | `string` | 活动地点                                                 |
| `organizer`           | `string` | 活动组织者（学院/组织）                                  |
| `image`               | `file`   | 活动图片                                                 |
| `hot`                 | `number` | 是否热门                                                 |
| `hasLimit`            | `number` | 是否有预约人数限制                                       |
| `currentParticipants` | `number` | 当前预约人数                                             |
| `maxParticipants`     | `number` | 最大限制预约人数                                         |
| `reserveStartTime`    | `string` | 活动开始预约时间，未开始则不开放                         |

---

**接口路径**：`api/activities/{activityId}/related`

**方法**：GET

**描述**：获取与某个活动相关的三个活动

**请求参数**：无

**返回参数**：

| 参数名称              | 类型     | 描述                                                     |
| :-------------------- | :------- | :------------------------------------------------------- |
| `code`                | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`          | `number` | 活动 ID                                                  |
| `activityName`        | `string` | 活动标题                                                 |
| `activityType`        | `string` | 活动类别                                                 |
| `startTime`           | `string` | 活动开始时间                                             |
| `timeSpan`            | `string` | 活动持续时间                                             |
| `location`            | `string` | 活动地点                                                 |
| `organizer`           | `string` | 活动组织者（学院/组织）                                  |
| `image`               | `file`   | 活动图片                                                 |
| `hot`                 | `number` | 是否热门                                                 |
| `hasLimit`            | `number` | 是否有预约人数限制                                       |
| `currentParticipants` | `number` | 当前预约人数                                             |
| `maxParticipants`     | `number` | 最大限制预约人数                                         |
| `reserveStartTime`    | `string` | 活动开始预约时间，未开始则不开放                         |
| `total`               | `number` | 返回的活动总数，默认为3                                  |

---

## 4.查看活动详情

| 接口路径                                | 方法   | 描述                           |
| --------------------------------------- | ------ | ------------------------------ |
| `/api/activities/{activityId}`          | GET    | 查看活动详情                   |
| `/api/activities/{activityId}/comments` | GET    | 获取活动评论                   |
| `/api/activities/{activityId}/comments` | POST   | 发表活动评论                   |
| `/api/activities/{activityId}/like`     | POST   | 关注活动                       |
| `/api/activities/{activityId}/like`     | DELETE | 取消关注活动                   |
| `/api/activities/{activityId}/share`    | GET    | 获取活动分享信息               |
| `/api/activities/{activityId}/related`  | GET    | 获取与该活动相关的三个活动信息 |

---

**接口路径**：`api/activities/{activityId}`

**方法**：GET

**描述**：查看某个活动的详情

**请求参数**：

| 参数名称     | 类型  | 描述    | 是否必填 |
| ------------ | ----- | ------- | -------- |
| `activityId` | `int` | 活动 ID | 是       |

**返回参数**：

| 参数名称              | 类型     | 描述                                                     |
| :-------------------- | :------- | :------------------------------------------------------- |
| `code`                | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`          | `number` | 活动 ID                                                  |
| `activityName`        | `string` | 活动标题                                                 |
| `activityType`        | `string` | 活动类别                                                 |
| `startTime`           | `string` | 活动开始时间                                             |
| `timeSpan`            | `string` | 活动持续时间                                             |
| `location`            | `string` | 活动地点                                                 |
| `organizer`           | `string` | 活动组织者（学院/组织）                                  |
| `image`               | `file`   | 活动图片                                                 |
| `hot`                 | `number` | 是否热门                                                 |
| `hasLimit`            | `number` | 是否有预约人数限制                                       |
| `currentParticipants` | `number` | 当前预约人数                                             |
| `maxParticipants`     | `number` | 最大限制预约人数                                         |
| `description`         | `string` | 活动详情信息,支持html格式                                |
| `requirements`        | `string` | 参与要求，支持html格式                                   |
| `relationPeople`      | `string` | 联系人                                                   |
| `relationEmail`       | `string` | 联系邮箱                                                 |
| `isFocus`             | `number` | 当前用户是否关注（查表）                                 |
| `reserveStartTime`    | `string` | 活动开始预约时间，未开始则不开放                         |

---

**接口路径**：`api/activities/{activityId}/comments`

**方法**：GET

**描述**：获取某个活动的评论

**请求参数**：

| 参数名称     | 类型  | 描述    | 是否必填 |
| ------------ | ----- | ------- | -------- |
| `activityId` | `int` | 活动 ID | 是       |

**返回参数**：

| 参数名称     | 类型     | 描述                                                     |
| :----------- | :------- | :------------------------------------------------------- |
| `code`       | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`        | `string` | 默认为null，非必须，展示错误信息                         |
| `commentId`  | `number` | 评论 ID                                                  |
| `content`    | `string` | 评论内容                                                 |
| `userId`     | `string` | 用户ID                                                   |
| `userName`   | `string` | 用户名                                                   |
| `department` | `string` | 用户所属学院                                             |
| `time`       | `string` | 评论发布时间                                             |
| `likes`      | `number` | 点赞数量                                                 |
| `isLike`     | `number` | 当前用户是否点赞                                         |

---

**接口路径**：`api/activities/{activityId}/comments`

**方法**：POST

**描述**：写某个活动的评论

**请求参数**：

| 参数名称     | 类型     | 描述           | 是否必填 |
| ------------ | -------- | -------------- | -------- |
| `activityId` | `int`    | 活动 ID        | 是       |
| `content`    | `string` | 用户评论的内容 | 是       |

**返回参数**：

| 参数名称 | 类型     | 描述                                                     |
| -------- | -------- | -------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息或成功信息               |

**返回示例**：

```json
{
  "code": 200,
  "msg": "评论发表成功",
  "data": {
    "id": 42,
    "content": "这个活动很有意思，期待参加！",
    "userId": 1,
    "userName": "张三",
    "department": "数学与统计学院",
    "time": "2025-04-12T14:30:00Z",
    "likes": 0
  }
}
```

---

## 5.用户活动预约与参与

| 接口路径                         | 方法   | 描述                             |
| -------------------------------- | ------ | -------------------------------- |
| `/api/reservations`              | *      | 统一描述活动预约与参与的接口     |
| `/api/reservations/{activityId}` | POST   | 用户预约活动                     |
| `/api/reservations/{activityId}` | DELETE | 用户取消活动预约                 |
| `/api/reservations/history`      | GET    | 获取历史参与活动，用于可视化统计 |
| `/api/reservations/violations`   | GET    | 获取违约记录                     |

---

**接口路径**：`/api/reservations/{activityId}`

**方法**：POST

**描述**：用户预约活动

**请求参数**：

| 参数名称     | 类型  | 描述    | 是否必填 |
| ------------ | ----- | ------- | -------- |
| `activityId` | `int` | 活动 ID | 是       |

**返回参数**：(活动标题、时间、发起组织前端已经有了；以后：确保统一用户不会重复预约，引用请求ID或时间戳)

| 参数名称                               | 类型     | 描述                                                     |
| -------------------------------------- | -------- | -------------------------------------------------------- |
| **`code`**//判断，0预约名额不足，1成功 | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                                  | `string` | 默认为null，非必须，展示错误信息或成功信息               |

---

**接口路径**：`/api/reservations/{activityId}`

**方法**：DELETE

**描述**：针对已预约用户，对某个活动取消预约

**请求参数**：

| 参数名称     | 类型     | 描述   | 是否必填 |
| ------------ | -------- | ------ | -------- |
| `activityId` | `number` | 活动ID | 是       |

**返回参数**：

| 参数名称 | 类型     | 描述                                                     |
| -------- | -------- | -------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息或成功信息               |

----

**接口路径**：`/api/reservations/history`

**方法**：GET

**描述**：获取某个用户的历史参与活动列表

**请求参数**：无

**返回参数**：

| 参数名称       | 类型     | 描述                                                     |
| -------------- | -------- | -------------------------------------------------------- |
| `code`         | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`          | `string` | 默认为null，非必须，展示错误信息或成功信息               |
| `activityId`   | `number` | 活动ID                                                   |
| `activityName` | `string` | 活动名称                                                 |
| `activityType` | `string` | 活动类型                                                 |
| `startTime`    | `string` | 活动开始时间                                             |
| `timeSpan`     | `string` | 活动时长                                                 |
| `location`     | `string` | 地点                                                     |

---

**接口路径**：`/api/reservations/violations`

**方法**：POST

**描述**：针对已预约用户，获取违约记录

**请求参数**：

**返回参数**：

| 参数名称       | 类型     | 描述                                                     |
| -------------- | -------- | -------------------------------------------------------- |
| `code`         | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`          | `string` | 默认为null，非必须，展示错误信息或成功信息               |
| `activityName` | `string` | 活动名称                                                 |
| `activityType` | `string` | 活动类型                                                 |
| `startTime`    | `string` | 活动开始时间                                             |
| `timeSpan`     | `string` | 活动时长                                                 |
| `location`     | `string` | 地点                                                     |

---

## 6.日历查看

| 接口路径                       | 方法 | 描述                                         |
| ------------------------------ | ---- | -------------------------------------------- |
| `/api/calendar`                | GET  | 日历展示，对用户即将参与活动的日期高亮；     |
| `/api/calendar/{date}`         | GET  | 用户点击具体日期时，返回活动标题、时间、地点 |
| `/api/activities/{activityId}` | GET  | 查看活动详情                                 |

---

**接口路径**：`/api/calendar`

**方法**：GET

**描述**：查看日历日程

**请求参数**：

| 参数名称 | 类型     | 描述 | 是否必填           |
| -------- | -------- | ---- | ------------------ |
| `month`  | `string` | 月份 | 否，默认是当前月份 |

**返回参数**：

| 参数名称 | 类型     | 描述                                                     |
| :------- | :------- | :------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息                         |
| `date`   | `string` | 截取天。用户即将参加活动的具体日期（1-31）               |



---

**接口路径**：`/api/calendar/{date}`

**方法**：GET

**描述**：用户点击具体某一天，查看具体活动内容

**请求参数**：

| 参数名称 | 类型     | 描述 | 是否必填           |
| -------- | -------- | ---- | ------------------ |
| `month`  | `string` | 月份 | 否，默认是当前月份 |
| `date`   | `string` | 日期 | 当天日期           |

**返回参数**：

| 参数名称       | 类型     | 描述                                                     |
| :------------- | :------- | :------------------------------------------------------- |
| `code`         | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`          | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`   | `string` | 活动ID                                                   |
| `activityName` | `string` | 活动名称                                                 |
| `startTime`    | `string` | 活动当天开始时间                                         |
| `timeSpan`     | `string` | 活动时长                                                 |
| `location`     | `string` | 活动地点                                                 |

---



## 7.消息通知

| 接口路径                           | 方法 | 描述                                 |
| ---------------------------------- | ---- | ------------------------------------ |
| `/api/notification`                | *    | 统一描述消息通知的接口               |
| `/api/notification/activityChange` | GET  | 获取活动变更提醒                     |
| `/api/notification/activity`       | GET  | 针对管理员发布的活动提醒，用户端接受 |
| `/api/notification/violations`     | GET  | 用户获取违约提醒                     |

---

**接口路径**：`/api/notification/activityChange`

**方法**：GET

**描述**：用户获取获取活动变更提醒

**请求参数**：无

**返回参数**：

| 参数名称       | 类型     | 描述                                                     |
| :------------- | :------- | :------------------------------------------------------- |
| `code`         | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`          | `string` | 默认为null，非必须，展示错误信息                         |
| `activityName` | `string` | 活动名称                                                 |
| `content`      | `string` | 修改内容                                                 |
| `currentTime`  | `string` | 提醒发布时间                                             |

---

**接口路径**：`/api/notification/activity`

**方法**：GET

**描述**：用户获取管理员发布的活动通知

**请求参数**：无

**返回参数**：

| 参数名称         | 类型     | 描述                                                     |
| :--------------- | :------- | :------------------------------------------------------- |
| `code`           | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`            | `string` | 默认为null，非必须，展示错误信息                         |
| `messageTitle`   | `string` | 通知标题                                                 |
| `messageContent` | `string` | 通知内容                                                 |
| `currentTime`    | `string` | 通知发布时间                                             |

---

**接口路径**：`/api/notification/violations`

**方法**：GET

**描述**：用户获取违约提醒

**请求参数**：

**返回参数**：

| 参数名称       | 类型     | 描述                                                     |
| :------------- | :------- | :------------------------------------------------------- |
| `code`         | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`          | `string` | 默认为null，非必须，展示错误信息                         |
| `activityId`   | `number` | 活动ID                                                   |
| `activityName` | `string` | 活动名称                                                 |
| `startTime`    | `string` | 活动当天开始时间                                         |
| `timeSpan`     | `string` | 活动时长                                                 |
| `location`     | `string` | 活动地点                                                 |
| `currentTime`  | `string` | 违约发布时间                                             |

---



## 8.管理员发布活动与提醒

| 接口路径                         | 方法 | 描述                           |
| -------------------------------- | ---- | ------------------------------ |
| `/api/admin/launch`              | *    | 统一描述管理员发布操作的接口   |
| `/api/admin/launch/activity`     | POST | 管理员发布新活动               |
| `/api/admin/launch/notification` | POST | 管理员发布强制性活动的参与提醒 |

---

**接口路径**：`/api/admin/launch/activity`

**方法**：POST

**描述**：用管理员发布活动

**请求参数**：

| 参数名称          | 类型     | 描述                                  | 是否必填           |
| ----------------- | -------- | ------------------------------------- | ------------------ |
| `activityName`    | `string` | 活动标题                              | 否，默认是当前月份 |
| `activityType`    | `string` | 活动类别                              | 当天日期           |
| `startTime`       | `string` | 活动开始时间                          | 是                 |
| `timeSpan`        | `string` | 活动时长                              | 是                 |
| `location`        | `string` | 活动地点                              | 是                 |
| `hasLimit`        | `number` | 是否有人数限制(与maxParticipants相关) | 是                 |
| `maxParticipants` | `number` | 最大参与人数                          | 否                 |
| `organizer`       | `number` | 活动主办方                            | 是                 |
| `limitOfGrade`    | `string` | 年级限制，根据该限制确定推送人        | 否                 |
| `limitOfCollage`  | `string` | 学院限制，根据该限制确定推送人        | 否                 |
| `relationPeople ` | `string` | 联系人                                | 是                 |
| `relationEmail`   | `string` | 联系邮箱                              | 是                 |
| `image`           | `file`   | 活动图片                              | 否                 |
| `description`     | `string` | 活动详情                              | 是                 |
| `requirements`    | `string` | 参与要求                              | 是                 |

**返回参数**：

| 参数名称    | 类型     | 描述                                                     |
| :---------- | :------- | :------------------------------------------------------- |
| `code`      | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`       | `string` | 默认为null，非必须，展示错误信息                         |
| `isviolate` | `number` | 是否与其它活动的时间冲突，0未冲突，1冲突                 |

---

**接口路径**：`/api/admin/launch/notification`

**方法**：POST

**描述**：管理员发布通知(强制活动，进行提醒)

**请求参数**：（没有活动类别，发布时间由系统自己获取然后填写字段）

| 参数名称          | 类型     | 描述     | 是否必填 |
| ----------------- | -------- | -------- | -------- |
| `meassageTitle`   | `string` | 通知标题 | 是       |
| `meassageContent` | `string` | 通知内容 | 是       |
| `limitOfGrade`    | `string` | 年级限制 | 否       |
| `limitOfCollage`  | `string` | 组织限制 | 否       |

**返回参数**：

| 参数名称 | 类型     | 描述                                                     |
| :------- | :------- | :------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息                         |



---

## 9.管理员活动管理

| 接口路径                                | 方法 | 描述                                         |
| --------------------------------------- | ---- | -------------------------------------------- |
| `/api/admin/activity`                   | GET  | 管理员查看活动信息，0表示已结束，1表示未开始 |
| `/api/admin/activity/{activityId}`      | GET  | 管理员查看活动详情信息                       |
| `/api/admin/update/{activityId}`        | POST | 管理员针对已发布的活动，进行修改             |
| `/api/admin/listExport/{activityId}`    | GET  | 管理员导出预约名单，便于后续签到             |
| `/api/admin/violateHandle/{activityId}` | POST | 活动结束后，管理员对人员进行违约处理         |

---

**接口路径**：``/api/admin/activity``

**方法**：GET

**描述**： 管理员查看活动列表，默认全部，0表示已结束，1表示未开始

**请求参数**：

| 参数名称 | 类型     | 描述                               | 是否必填 |
| -------- | -------- | ---------------------------------- | -------- |
| `state`  | `number` | 是否结束，0表示已结束，1表示未开始 | 是       |

**返回参数**：

| 参数名称              | 类型      | 描述                                                     |
| :-------------------- | :-------- | :------------------------------------------------------- |
| `code`                | `number`  | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string`  | 默认为null，非必须，展示错误信息                         |
| `activityId`          | `number`  | 活动 ID                                                  |
| `title`               | `string`  | 活动标题                                                 |
| `category`            | `string`  | 活动类别                                                 |
| `date`                | `string`  | 活动日期和时间                                           |
| `location`            | `string`  | 活动地点                                                 |
| `organizer`           | `string`  | 活动组织者（学院/组织）                                  |
| `image`               | `file`    | 活动图片                                                 |
| `hasLimit`            | `boolean` | 是否有预约人数限制                                       |
| `currentParticipants` | `number`  | 当前预约人数                                             |
| `maxParticipants`     | `number`  | 最大限制预约人数                                         |
| `reserveStartTime`    | `string`  | 活动开始预约时间，未开始则不开放                         |
| `total`               | `number`  | 筛选到的活动总数（需要显示）                             |

---

**接口路径**：`/api/admin/activity/{activityId}`

**方法**：GET

**描述**： 管理员查看活动的详情信息，主要是显示参与人员

**请求参数**：

| 参数名称     | 类型     | 描述    | 是否必填 |
| ------------ | -------- | ------- | -------- |
| `activityId` | `number` | 活动 ID | 是       |

**返回参数**：

| 参数名称              | 类型           | 描述                                                     |
| :-------------------- | :------------- | :------------------------------------------------------- |
| `code`                | `number`       | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`                 | `string`       | 默认为null，非必须，展示错误信息                         |
| `title`               | `string`       | 活动标题                                                 |
| `category`            | `string`       | 活动类别                                                 |
| `date`                | `string`       | 活动开始日期和时间                                       |
| ***`timeSpan`***      | ***`string`*** | ***活动持续时间***                                       |
| `location`            | `string`       | 活动地点                                                 |
| `organizer`           | `string`       | 活动组织者（学院/组织）                                  |
| `image`               | `file`         | 活动图片                                                 |
| `hot`                 | `boolean`      | 是否热门                                                 |
| `hasLimit`            | `boolean`      | 是否有预约人数限制                                       |
| `currentParticipants` | `number`       | 当前预约人数                                             |
| `maxParticipants`     | `number`       | 最大限制预约人数                                         |
| `description`         | `string`       | 活动详情信息,支持html格式                                |
| `requirements`        | `string`       | 参与要求，支持html格式                                   |
| `relationPeople`      | `string`       | 联系人                                                   |
| `relationEmail`       | `string`       | 联系邮箱                                                 |
| `isFocus`             | `number`       | 当前用户是否关注（查表）                                 |
| `reserveStartTime`    | `string`       | 活动开始预约时间，未开始则不开放                         |
| `userId`              | `number`       | 用户学号                                                 |
| `userName`            | `string`       | 用户姓名                                                 |
| `class`               | `string`       | 班级                                                     |

---

**接口路径**：`/api/admin/update/{activityId}`

**方法**：POST

**描述**：管理员针对已发布的活动，进行修改

**请求参数**：

| 参数名称          | 类型     | 描述         | 是否必填 |
| ----------------- | -------- | ------------ | -------- |
| `activityId`      | `number` | 活动ID       | 是       |
| `startTime`       | `string` | 活动开始时间 | 否       |
| `timeSpan`        | `string` | 活动时长     | 否       |
| `location`        | `string` | 活动地点     | 否       |
| `maxParticipants` | `number` | 最大参与人数 | 否       |
| `organizer`       | `number` | 活动主办方   | 是       |
| `relationEmail`   | `string` | 联系邮箱     | 是       |
| `relationPeople ` | `string` | 联系人       | 是       |
| `image`           | `string` | 活动海报URL  | 否       |

**返回参数**：

| 参数名称 | 类型     | 描述                                                     |
| :------- | :------- | :------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息                         |

---

**接口路径**：`/api/admin/listExport/{activityId}`

**方法**：GET

**描述**：  管理员导出预约名单，便于后续签到

**请求参数**：

| 参数名称     | 类型     | 描述   | 是否必填 |
| ------------ | -------- | ------ | -------- |
| `activityId` | `number` | 活动ID | 是       |

**返回参数**：

| 参数名称   | 类型     | 描述                                                     |
| :--------- | :------- | :------------------------------------------------------- |
| `code`     | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`      | `string` | 默认为null，非必须，展示错误信息                         |
| `userId`   | `number` | 用户学号                                                 |
| `userName` | `string` | 用户姓名                                                 |
| `class`    | `string` | 班级                                                     |

----

**接口路径**：`/api/admin/violateHandle/{activityId}`

**方法**：POST

**描述**： 活动结束后，管理员对参与活动个人进行违约处理

**请求参数**：

| 参数名称     | 类型     | 描述     | 是否必填 |
| ------------ | -------- | -------- | -------- |
| `activityId` | `number` | 活动 ID  | 是       |
| `userId`     | `number` | 用户学号 | 是       |

**返回参数**：

| 参数名称 | 类型     | 描述                                                     |
| :------- | :------- | :------------------------------------------------------- |
| `code`   | `number` | 状态码，前端根据状态码判断请求是否成功，以及如何处理响应 |
| `msg`    | `string` | 默认为null，非必须，展示错误信息                         |

---

