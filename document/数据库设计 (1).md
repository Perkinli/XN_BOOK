一个用户可以预约多个活动，一个活动可以被多个用户预约；

一个管理员可以发布多个活动，一个活动只能被一个管理发布；

一个管理员可以发布多个通知，一个通知只能被一个管理员发布；

一个用户可以收到多个通知，一个通知也可以被多个用户收到；

一个活动可以有多条评论，一条评论只属于一个活动

一个用户可以发布多条评论，一条评论只能由一个用户发布

管理员可以发布多条违约提醒，一条违约提醒只能被一个管理员发布

一个用户可以接受多条违约提醒，一条违约提醒可以被多个用户接受

一个活动可以产生多条违约提醒，一条违约提醒只属于一个活动

针对已预约用户,一个用户可以接受多条活动修改提醒，一条活动修改提醒可以被多个用户接受。

一个活动可以产生多条活动修改提醒，一条活动修改提醒只属于一个活动





-- 用户表
CREATE TABLE tb_user (
                         userId INT PRIMARY KEY,
                         userName VARCHAR(50) NOT NULL,
                         password VARCHAR(255) NOT NULL,
                         useType INT NOT NULL,
                         grade VARCHAR(255) NOT,
                         class VARCHAR(255),
                         phone VARCHAR(255),

​						 department VARCHAR(255),

​						email VARCHAR(255),

​						gender VARCHAR(25),

​                         releaseTime DATETIME,
​                         violateCount INT DEFAULT 0,
​                         activityCount INT DEFAULT 0,
​                         avatar VARCHAR(255)
);

-- 活动表
CREATE TABLE tb_activity (
                             activityId INT PRIMARY KEY,
                             activityName VARCHAR(255) NOT NULL,
                             maxParticipants INT NOT NULL,
                             currentParticipants INT DEFAULT 0,

​							 focus INT DEFAULT 0,

​						    *hot INT NOT NULL，*

​                             activityType VARCHAR(255),
​                             reserveStartTime DATETIME,
​                   
​                             limitOfGrade VARCHAR(255),
​                             limitOfCollage VARCHAR(255),
​                             location VARCHAR(255),

​							hasLimit Bool,

​                             description text,

​							requirements text,

​                             relationPeople VARCHAR(255),
​                             relationEmail  VARCHAR(255),

                         image VARCHAR(255),
                         startTime VARCHAR(255),
                         timeSpan VARCHAR(255),//预计时长
                         organizer VARCHAR(255)                 



);

-- 管理员-活动关联表
CREATE TABLE tb_admin_activity (
                                   id INT PRIMARY KEY,
                                   user_id INT NOT NULL,
                                   activity_id INT NOT NULL,
                                   FOREIGN KEY (user_id) REFERENCES tb_user(user_id),
                                   FOREIGN KEY (activity_id) REFERENCES tb_activity(activity_id)
);

-- 用户-活动参与表（活动预约表）
CREATE TABLE tb_user_activity (
                                  reservationId INT PRIMARY KEY,
                                  activityId INT NOT NULL,
                                  userId INT NOT NULL,
                                  FOREIGN KEY (activity_id) REFERENCES tb_activity(activity_id),
                                  FOREIGN KEY (user_id) REFERENCES tb_user(user_id)
);

-- 活动通知表（管理员发布）
CREATE TABLE tb_message (
                            messageId INT PRIMARY KEY,

​							messageTitle VARCHAR(255) NOT NULL,

​                            messageContent VARCHAR(255) NOT NULL,
​                           currentTime date,NOT NULL,

​							limitOfGrade VARCHAR(255),
​                             limitOfCollage VARCHAR(255),


);

--- 违规提醒表

 id userId activityId currentTime 

--- 活动修改提醒

id activityId content currentTime  

-- 评论表
CREATE TABLE tb_comments (
                             commentId INT PRIMARY KEY,
                             content VARCHAR(255) NOT NULL,
                             userId INT NOT NULL,
                             activityId INT NOT NULL,
                             time DATETIME,
                             likes INT DEFAULT 0,
                             FOREIGN KEY (userId) REFERENCES tb_user(user_id),
                             FOREIGN KEY (activityId) REFERENCES tb_activity(activity_id)







--- 活动关注表(类redis)

CREATE TABLE tb_focus (

​							Id INT PRIMARYKEY,	

​                             userId INT NOTNULL,
​                              activityId INT NOT NULL,

​							 FOREIGN KEY (activityId) REFERENCES tb_activity(activity_id)

---

CREATE TABLE tb_commentLike (
                      

​                               commentId INT PRIMARY KEY,

​								userId INT,

​							 FOREIGN KEY (userId) REFERENCES tb_user(userId)

### **1. 用户表（tb_user）**

|     字段名      |     类型     |            描述            |
| :-------------: | :----------: | :------------------------: |
|    `userId`     |     INT      |    用户ID（学号/工号）     |
|   `userName`    | VARCHAR(50)  |           用户名           |
|   `password`    | VARCHAR(255) |          加密密码          |
|   `userType`    |     INT      | 用户类型（1学生，2管理员） |
|     `grade`     | VARCHAR(255) |            年级            |
|     `class`     | VARCHAR(255) |            班级            |
|     `phone`     | VARCHAR(255) |            电话            |
|  `department`   | VARCHAR(255) |         学院/部门          |
|     `email`     | VARCHAR(255) |            邮箱            |
|    `gender`     | VARCHAR(25)  |            性别            |
|  `releaseTime`  |   DATETIME   |    解禁时间（违约限制）    |
| `violateCount`  |     INT      |          违约次数          |
| `activityCount` |     INT      |        参与活动次数        |
|    `avatar`     | VARCHAR(255) |          头像URL           |



### **2. 活动表（tb_activity）**

|        字段名         |     类型     |         描述         |
| :-------------------: | :----------: | :------------------: |
|     `activityId`      |     INT      |        活动ID        |
|    `activityName`     | VARCHAR(255) |       活动名称       |
|   `maxParticipants`   |     INT      |     最大参与人数     |
| `currentParticipants` |     INT      |     当前参与人数     |
|        `focus`        |     INT      |        关注数        |
|         `hot`         |     INT      | 是否热门（1是，0否） |
|    `activityType`     | VARCHAR(255) |       活动类别       |
|  `reserveStartTime`   |   DATETIME   |     预约开始时间     |
|    `limitOfGrade`     | VARCHAR(255) |       年级限制       |
|   `limitOfCollage`    | VARCHAR(255) |       学院限制       |
|      `location`       | VARCHAR(255) |       活动地点       |
|      `hasLimit`       |     BOOL     |    是否有人数限制    |
|     `description`     |     TEXT     | 活动详情（HTML格式） |
|    `requirements`     |     TEXT     | 参与要求（HTML格式） |
|   `relationPeople`    | VARCHAR(255) |        联系人        |
|    `relationEmail`    | VARCHAR(255) |       联系邮箱       |
|        `image`        | VARCHAR(255) |     活动图片URL      |
|      `startTime`      | VARCHAR(255) |     活动开始时间     |
|      `timeSpan`       | VARCHAR(255) |     活动持续时间     |
|      `organizer`      | VARCHAR(255) | 组织者（学院/社团）  |

### **3. 管理员-活动关联表（tb_admin_activity）**

|    字段名     | 类型 |     描述     |
| :-----------: | :--: | :----------: |
|     `id`      | INT  |    关联ID    |
|   `user_id`   | INT  | 管理员用户ID |
| `activity_id` | INT  | 关联的活动ID |

### **4. 用户-活动预约表（tb_user_activity）**

|     字段名      | 类型 |  描述  |
| :-------------: | :--: | :----: |
| `reservationId` | INT  | 预约ID |
|  `activityId`   | INT  | 活动ID |
|    `userId`     | INT  | 用户ID |



### **5. 活动通知表（tb_message）**

| 字段名           | 类型         | 描述     |
| :--------------- | :----------- | :------- |
| `messageId`      | INT          | 消息ID   |
| `messageTitle`   | VARCHAR(255) | 消息标题 |
| `messageContent` | VARCHAR(255) | 消息内容 |
| `currentTime`    | DATE         | 发布时间 |
| `limitOfGrade`   | VARCHAR(255) | 年级限制 |
| `limitOfCollage` | VARCHAR(255) | 学院限制 |



#### **违规提醒表**

| 字段名        | 类型 | 描述         |
| :------------ | :--- | :----------- |
| `id`          | INT  | 记录ID       |
| `userId`      | INT  | 违约用户ID   |
| `activityId`  | INT  | 关联活动ID   |
| `currentTime` | DATE | 违约记录时间 |

#### **活动修改提醒表**

| 字段名        | 类型         | 描述         |
| :------------ | :----------- | :----------- |
| `id`          | INT          | 记录ID       |
| `activityId`  | INT          | 关联活动ID   |
| `content`     | VARCHAR(255) | 修改内容描述 |
| `currentTime` | DATE         | 修改时间     |



### **6. 评论表（tb_comments）**

| 字段名       | 类型         | 描述     |
| :----------- | :----------- | :------- |
| `commentId`  | INT          | 评论ID   |
| `content`    | VARCHAR(255) | 评论内容 |
| `userId`     | INT          | 用户ID   |
| `activityId` | INT          | 活动ID   |
| `time`       | DATETIME     | 评论时间 |
| `likes`      | INT          | 点赞数   |



### **7. 活动关注表（tb_focus）**

| 字段名       | 类型 | 描述       |
| :----------- | :--- | :--------- |
| `Id`         | INT  | 关注记录ID |
| `userId`     | INT  | 用户ID     |
| `activityId` | INT  | 活动ID     |

### **8. 评论点赞表（tb_commentLike）**

| 字段名      | 类型 | 描述   |
| :---------- | :--- | :----- |
| `commentId` | INT  | 评论ID |
| `userId`    | INT  | 用户ID |

1. tb_user (
       userId INT PRIMARY KEY,userName VARCHAR(50) NOT NULL,
       password VARCHAR(255) NOT NULL,
       userType INT NOT NULL,
       grade VARCHAR(255),
       class VARCHAR(255),
       phone VARCHAR(255),
       department VARCHAR(255),
       email VARCHAR(255),
       gender VARCHAR(25),
       releaseTime DATETIME,
       violateCount INT DEFAULT 0,
       activityCount INT DEFAULT 0,
       avatar VARCHAR(255))

2. tb_activity (
       activityId INT PRIMARY KEY,
       activityName VARCHAR(255) NOT NULL,
       maxParticipants INT NOT NULL,
       currentParticipants INT DEFAULT 0,
       focus INT DEFAULT 0,
       hot INT NOT NULL,
       activityType VARCHAR(255),
       reserveStartTime DATETIME,
       limitOfGrade VARCHAR(255),
       limitOfCollage VARCHAR(255),
       location VARCHAR(255),
       hasLimit BOOL,
       description TEXT,
       requirements TEXT,
       relationPeople VARCHAR(255),
       relationEmail VARCHAR(255),
       image VARCHAR(255),
       startTime VARCHAR(255),
       timeSpan VARCHAR(255),
       organizer VARCHAR(255))



3. tb_admin_activity (
       id INT PRIMARY KEY,
       user_id INT NOT NULL,
       activity_id INT NOT NULL,
       FOREIGN KEY (user_id) REFERENCES tb_user(userId),
       FOREIGN KEY (activity_id) REFERENCES tb_activity(activityId))

4. tb_user_activity (
       reservationId INT PRIMARY KEY,
       activityId INT NOT NULL,
       userId INT NOT NULL,
       FOREIGN KEY (activityId) REFERENCES tb_activity(activityId),
       FOREIGN KEY (userId) REFERENCES tb_user(userId))



5. tb_message (
       messageId INT PRIMARY KEY,
       messageTitle VARCHAR(255) NOT NULL,
       messageContent VARCHAR(255) NOT NULL,
       currentTime DATE NOT NULL,
       limitOfGrade VARCHAR(255),
       limitOfCollage VARCHAR(255))

6. tb_comments (
       commentId INT PRIMARY KEY,
       content VARCHAR(255) NOT NULL,
       userId INT NOT NULL,
       activityId INT NOT NULL,
       time DATETIME,
       likes INT DEFAULT 0,
       FOREIGN KEY (userId) REFERENCES tb_user(userId),
       FOREIGN KEY (activityId) REFERENCES tb_activity(activityId))

7. tb_focus (
       Id INT PRIMARY KEY,
       userId INT NOT NULL,
       activityId INT NOT NULL,
       FOREIGN KEY (activityId) REFERENCES tb_activity(activityId))

8. tb_commentLike (
       commentId INT PRIMARY KEY,
       userId INT,
       FOREIGN KEY (userId) REFERENCES tb_user(userId))

9. tb_violation (
       id INT PRIMARY KEY,
       userId INT,
       activityId INT,
       currentTime DATE,
       FOREIGN KEY (userId) REFERENCES tb_user(userId),
       FOREIGN KEY (activityId) REFERENCES tb_activity(activityId))

10. tb_activity_update (
        id INT PRIMARY KEY,
        activityId INT,
        content VARCHAR(255),
        currentTime DATE,
        FOREIGN KEY (activityId) REFERENCES tb_activity(activityId))











